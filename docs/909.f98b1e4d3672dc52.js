"use strict";(self.webpackChunkquotes=self.webpackChunkquotes||[]).push([[909],{6909:(G,p,r)=>{r.r(p),r.d(p,{SearchModule:()=>E});var u=r(6814),i=r(95),s=r(8978),g=r(6975),h=r(4716),t=r(9468),f=r(5672),d=r(8775),x=r(5619),v=r(7398),S=r(9397),T=r(553),Z=r(9862);let b=(()=>{class o{constructor(n){this.http=n,this._tags=new x.X(null),this.tags$=this._tags.asObservable(),this.getTags().subscribe()}getTags(){return this.http.get(`${T.N.apiServer}/tags`).pipe((0,v.U)(n=>n.map(e=>({...e,name:e.name.replace("-"," ")}))),(0,S.b)(n=>this._tags.next(n)))}static#t=this.\u0275fac=function(e){return new(e||o)(t.LFG(Z.eN))};static#n=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function C(o,a){if(1&o&&(t.TgZ(0,"option",9),t._uU(1),t.qZA()),2&o){const n=a.$implicit;t.Q6J("value",n.slug),t.xp6(1),t.Oqu(n.name)}}function A(o,a){if(1&o&&(t.ynx(0),t.YNc(1,C,2,2,"option",8),t.BQk()),2&o){const n=a.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function I(o,a){if(1&o&&(t.TgZ(0,"option",9),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&o){const n=a.$implicit;t.Q6J("value",n.slug),t.xp6(1),t.Oqu(t.lcZ(2,2,n.name))}}function q(o,a){if(1&o&&(t.ynx(0),t.YNc(1,I,3,4,"option",8),t.BQk()),2&o){const n=a.ngIf;t.xp6(1),t.Q6J("ngForOf",n)}}function F(o,a){1&o&&t.GkF(0)}function N(o,a){1&o&&t._uU(0,"No quotes found")}function J(o,a){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw(2).ngIf;t.xp6(1),t.AsE("",n.lastItemIndex===n.count?1:n.page===n.totalPages?n.totalCount-n.count:n.lastItemIndex-n.count," to ",n.lastItemIndex||n.totalCount," of")}}function Q(o,a){1&o&&(t.ynx(0),t._uU(1,"s"),t.BQk())}function O(o,a){if(1&o&&(t.YNc(0,J,2,2,"ng-container",4),t._uU(1),t.YNc(2,Q,2,0,"ng-container",4)),2&o){const n=t.oxw().ngIf;t.Q6J("ngIf",n.totalCount>n.count),t.xp6(1),t.hij(" ",n.totalCount," quote"),t.xp6(1),t.Q6J("ngIf",1!==n.totalCount)}}function Y(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"span",19),t.NdJ("click",function(){const l=t.CHM(n).$implicit,_=t.oxw(3);let m;return t.KtG(_.onSearch({author:null==(m=_.form.get("author"))?null:m.value,page:1,tag:l}))}),t._uU(1),t.qZA()}if(2&o){const n=a.$implicit;t.xp6(1),t.Oqu(n)}}const y=function(o){return["/authors",o,"view"]};function U(o,a){if(1&o&&(t.TgZ(0,"blockquote"),t._uU(1),t.TgZ(2,"div",16),t.YNc(3,Y,2,1,"span",17),t.qZA(),t.TgZ(4,"cite")(5,"a",18),t._uU(6),t.qZA()()()),2&o){const n=a.$implicit;t.xp6(1),t.hij(" ",n.content," "),t.xp6(2),t.Q6J("ngForOf",n.tags),t.xp6(2),t.Q6J("routerLink",t.VKq(4,y,n.authorSlug)),t.xp6(1),t.Oqu(n.author)}}function k(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(n);const c=t.oxw(2).ngIf,l=t.oxw();return t.KtG(l.onSearch({page:c.page-1}))}),t._uU(1,"\xab Previous Page"),t.qZA()}}function L(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(n);const c=t.oxw(2).ngIf,l=t.oxw();return t.KtG(l.onSearch({page:c.page+1}))}),t._uU(1,"Next Page \xbb"),t.qZA()}}function B(o,a){if(1&o&&(t.TgZ(0,"div",20)(1,"div",21),t.YNc(2,k,2,0,"button",22),t.qZA(),t.TgZ(3,"div",23),t._uU(4),t.qZA(),t.TgZ(5,"div",21),t.YNc(6,L,2,0,"button",22),t.qZA()()),2&o){const n=t.oxw().ngIf;t.xp6(2),t.Q6J("ngIf",n.page>1),t.xp6(2),t.AsE(" Page ",n.page," of ",n.totalPages," "),t.xp6(2),t.Q6J("ngIf",n.lastItemIndex)}}function M(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"p",10),t.YNc(2,F,1,0,"ng-container",11),t.YNc(3,N,1,0,"ng-template",null,12,t.W1O),t.YNc(5,O,3,3,"ng-template",null,13,t.W1O),t.qZA(),t.YNc(7,U,7,6,"blockquote",14),t.YNc(8,B,7,4,"div",15),t.BQk()),2&o){const n=a.ngIf,e=t.MAs(4),c=t.MAs(6);t.xp6(2),t.Q6J("ngIf",0===n.totalCount)("ngIfThen",e)("ngIfElse",c),t.xp6(5),t.Q6J("ngForOf",n.results),t.xp6(1),t.Q6J("ngIf",n.totalPages>1)}}const P=[{path:"",component:(()=>{class o{constructor(n,e,c,l){this.authorsSvc=n,this.location=e,this.quotesSvc=c,this.tagsSvc=l}ngOnInit(){const n=this.location.getState();this.authors$=this.authorsSvc.authors$,this.form=new i.cw({author:new i.NI(""),tag:new i.NI("")}),(n.author||n.tag)&&(this.updateFormFields(n.author,n.tag),this.onSearch({author:n.author,page:1,tag:n.tag})),this.tags$=this.tagsSvc.tags$}getQuotes(n,e,c){return this.quotesSvc.getQuotes(n,e,c)}updateFormFields(n,e){this.form.patchValue({author:n||"",tag:e||""})}onSearch(n){const e=this.form.value;(n.author||n.tag)&&this.updateFormFields(n.author,n.tag),this.searchBtnState=s.xp5.LOADING,this.quoteList$=this.getQuotes(n.author||e.author,n.tag||e.tag,n.page).pipe((0,h.x)(()=>this.searchBtnState=s.xp5.DEFAULT))}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(f.S),t.Y36(u.Ye),t.Y36(d.G),t.Y36(b))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-search"]],decls:24,vars:12,consts:[["clrForm","","autocomplete","off",3,"formGroup","ngSubmit"],["for","author"],["clrSelect","","id","author","name","author","formControlName","author"],["value",""],[4,"ngIf"],["for","tag"],["clrSelect","","id","tag","name","tag","formControlName","tag"],["type","submit",1,"btn","btn-primary",3,"clrLoading","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-center"],[4,"ngIf","ngIfThen","ngIfElse"],["noQuotesFound",""],["quoteCount",""],[4,"ngFor","ngForOf"],["class","clr-row clr-align-items-center clr-justify-content-center text-center",4,"ngIf"],[1,"tags"],["class","label label-light-blue clickable",3,"click",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"label","label-light-blue","clickable",3,"click"],[1,"clr-row","clr-align-items-center","clr-justify-content-center","text-center"],[1,"clr-col-sm-12","clr-col-md-auto"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],[1,"clr-col-sm-12","clr-col-md-2"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(e,c){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Quotes"),t.qZA(),t.TgZ(2,"form",0),t.NdJ("ngSubmit",function(){return c.onSearch({page:1})}),t.TgZ(3,"clr-select-container")(4,"label",1),t._uU(5,"Author"),t.qZA(),t.TgZ(6,"select",2)(7,"option",3),t._uU(8,"All Authors"),t.qZA(),t.YNc(9,A,2,1,"ng-container",4),t.ALo(10,"async"),t.qZA()(),t.TgZ(11,"clr-select-container")(12,"label",5),t._uU(13,"Tag"),t.qZA(),t.TgZ(14,"select",6)(15,"option",3),t._uU(16,"All Tags"),t.qZA(),t.YNc(17,q,2,1,"ng-container",4),t.ALo(18,"async"),t.qZA()(),t.TgZ(19,"p")(20,"button",7),t._uU(21,"Search"),t.qZA()()(),t.YNc(22,M,9,5,"ng-container",4),t.ALo(23,"async")),2&e&&(t.xp6(2),t.Q6J("formGroup",c.form),t.xp6(7),t.Q6J("ngIf",t.lcZ(10,6,c.authors$)),t.xp6(8),t.Q6J("ngIf",t.lcZ(18,8,c.tags$)),t.xp6(3),t.Q6J("clrLoading",c.searchBtnState)("disabled",!c.form.valid),t.xp6(2),t.Q6J("ngIf",t.lcZ(23,10,c.quoteList$)))},dependencies:[s.cCV,s.MPb,s.MgK,s.YAP,s.otW,s.dTv,u.sg,u.O5,i._Y,i.YN,i.Kr,i.EJ,i.JJ,i.JL,i.sg,i.u,g.rH,u.Ov,u.rS],styles:['@charset "UTF-8";blockquote[_ngcontent-%COMP%]{padding-left:50px}blockquote[_ngcontent-%COMP%]:before{content:"\\201c";font-size:2rem;top:-20px}blockquote[_ngcontent-%COMP%]   div.tags[_ngcontent-%COMP%]{margin-top:.5rem}blockquote[_ngcontent-%COMP%]   div.tags[_ngcontent-%COMP%]:hover{cursor:pointer}']})}return o})()}];let $=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(P),g.Bz]})}return o})(),E=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[s.K6A,u.ez,i.UX,$]})}return o})()}}]);